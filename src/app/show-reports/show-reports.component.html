<h2>Raporty</h2>

<div>
  <label for="sortOrder">Data:</label>
  <select
    id="sortOrder"
    [(ngModel)]="dateOrder"
    (change)="changeDateOrder(dateOrder)"
  >
    <option value="asc">Najwczesniejsze</option>
    <option value="desc">Najpozniejsze</option>
  </select>
</div>

<div>
  <label for="sortOrder">Priorytet:</label>
  <select
    id="sortOrder"
    [(ngModel)]="priorityOrder"
    (change)="changePriorityOrder(priorityOrder)"
  >
    <option value="asc">Normalny</option>
    <option value="desc">Wysoki</option>
  </select>
</div>

<div>
  <label for="startDate">Data początkowa:</label>
  <input type="date" id="startDate" [(ngModel)]="startDateFilter" (change)="changestartDateFilter(startDateFilter)" />
</div>

<div>
  <label for="endDate">Data końcowa:</label>
  <input type="date" id="endDate" [(ngModel)]="endDateFilter" (change)="changeendDateFilter(endDateFilter)" />
</div>

<ul *ngIf="reports.length > 0; else noReports">
  <li
    *ngFor="
      let report of reports
        | combinedSort : dateOrder : 'date'
        | combinedSort : priorityOrder : 'priority'
        | combinedSort : startDateFilter : 'startDate'
        | combinedSort : endDateFilter : 'endDate'
      let i = index
    "
  >
    <strong>ID:</strong> {{ report["reportId"] }}, <strong>Opis:</strong>
    {{ report["description"] }}, <strong>Priorytet:</strong>
    {{ report["priority"] }}, <strong>Cena:</strong> {{ report["price"] }},
    <strong>Status:</strong> {{ report["status"] }},
    <strong>Data rozpoczęcia:</strong>
    {{ report["startDate"] | date : "dd.MM.yyyy" }},
    <strong>Data zakończenia:</strong>
    {{ report["endDate"] | date : "dd.MM.yyyy" }},
    <span *ngIf="isServiceman && report['servicemanid'] == undefined">
      <button (click)="TakeTask(report)">Take this report</button>
    </span>
    <span *ngIf="report['servicemanid'] == this.loggedUserId">
      <button (click)="NavigateToEditReport(report['reportId'])">
        Edit report
      </button>
    </span>
  </li>
</ul>

<ng-template #noReports>
  <p>Brak raportów do wyświetlenia.</p>
</ng-template>

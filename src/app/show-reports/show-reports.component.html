<h2>Raporty</h2>

<div>
  <label for="datesOrder">Daty:</label>
  <select id="datesOrder" [(ngModel)]="datesOrder" (change)="changeDateOrder(datesOrder)">
    <option value="asc">Rosnąco</option>
    <option value="desc">Malejąco</option>
  </select>
</div>

<div>
  <label for="priority">Priorytet:</label>
  <select id="priority" [(ngModel)]="priority" (change)="changePriorityOrder(priority)">
    <option value="all">Wszystkie</option>
    <option value="normal">Normalny</option>
    <option value="high">Wysoki</option>
  </select>
</div>

<div>
  <label for="startDate">Data początkowa:</label>
  <input type="date" id="startDate" [(ngModel)]="startDate" (change)="changeStartDateFilter(startDate)" />
</div>

<div>
  <label for="endDate">Data końcowa:</label>
  <input type="date" id="endDate" [(ngModel)]="endDate" (change)="changeEndDateFilter(endDate)" />
</div>


<ul *ngIf="reports.length > 0; else noReports">
  <li *ngFor="
      let report of reports
        | combinedSort : {dateOrder : datesOrder, priority : priority, startDate : startDate, endDate : endDate}
      let i = index
    ">
    <strong>ID:</strong> {{ report["id"] }}, <strong>Opis:</strong>
    {{ report["description"] }}, <strong>Priorytet:</strong>
    {{ report["priority"] }}, <strong>Cena:</strong> {{ report["price"] }},
    <strong>Status:</strong> {{ report["status"] }},
    <strong>Data rozpoczęcia:</strong>
    {{ report["startDate"] | date : "dd.MM.yyyy" }},
    <strong>Data zakończenia:</strong>
    {{ report["endDate"] | date : "dd.MM.yyyy" }},
    <span *ngIf="isServiceman && report['servicemanId'] == undefined">
      <button (click)="TakeTask(report)">Take this report</button>
    </span>
    <span *ngIf="report['servicemanId'] == this.loggedUserId">
      <button (click)="NavigateToEditReport(report['id'])">
        Edit report
      </button>
    </span>
  </li>
</ul>

<ng-template #noReports>
  <p>Brak raportów do wyświetlenia.</p>
</ng-template>